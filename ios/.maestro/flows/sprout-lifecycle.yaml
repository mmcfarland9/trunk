appId: mpmcf.Trunk
name: Sprout Lifecycle - Create, Water, Harvest
---

# Launch with test auth
- launchApp:
    clearState: false
    arguments:
      testAuth: "true"
      testEmail: "test@trunk.michaelpmcfarland.com"

# Wait for app to load
- extendedWaitUntil:
    visible: "Today"
    timeout: 15000

# Navigate to Trunk tab
- tapOn: "Trunk"

# Navigate to a branch
- extendedWaitUntil:
    visible:
      id: "branch-CORE"
    timeout: 5000
- tapOn:
    id: "branch-CORE"

# Navigate to a twig
- extendedWaitUntil:
    visible:
      id: "twig-movement"
    timeout: 5000
- tapOn:
    id: "twig-movement"

# Tap to create a new sprout
- tapOn:
    text: "New"
    optional: true

# If create button visible, continue with sprout creation
- runFlow:
    when:
      visible: "Create Sprout"
    commands:
      # Fill in sprout details
      - tapOn: "Title"
      - inputText: "E2E Test Sprout"

      # Select leaf or create new one
      - tapOn: "Select Leaf"
      - tapOn:
          text: "New Leaf"
          optional: true
      - inputText: "E2E Test Saga"
      - tapOn: "Done"

      # Select season
      - tapOn: "2 weeks"

      # Select environment
      - tapOn: "Fertile"

      # Plant the sprout
      - tapOn: "Plant"

      # Verify sprout appears
      - assertVisible: "E2E Test Sprout"
